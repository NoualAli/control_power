"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[354],{5714:(t,s,e)=>{e.d(s,{ZP:()=>w,l0:()=>y});var n=e(9669),i=e.n(n),o=Object.defineProperty,r=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,l=Object.prototype.propertyIsEnumerable,c=(t,s,e)=>s in t?o(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,d=(t,s)=>{for(var e in s||(s={}))r.call(s,e)&&c(t,e,s[e]);if(a)for(var e of a(s))l.call(s,e)&&c(t,e,s[e]);return t};const u=t=>void 0===t,v=t=>Array.isArray(t),p=t=>t&&"number"==typeof t.size&&"string"==typeof t.type&&"function"==typeof t.slice,m=(t,s,e,n)=>((s=s||{}).indices=!u(s.indices)&&s.indices,s.nullsAsUndefineds=!u(s.nullsAsUndefineds)&&s.nullsAsUndefineds,s.booleansAsIntegers=!u(s.booleansAsIntegers)&&s.booleansAsIntegers,s.allowEmptyArrays=!u(s.allowEmptyArrays)&&s.allowEmptyArrays,e=e||new FormData,u(t)||(null===t?s.nullsAsUndefineds||e.append(n,""):(t=>"boolean"==typeof t)(t)?s.booleansAsIntegers?e.append(n,t?1:0):e.append(n,t):v(t)?t.length?t.forEach(((t,i)=>{const o=n+"["+(s.indices?i:"")+"]";m(t,s,e,o)})):s.allowEmptyArrays&&e.append(n+"[]",""):(t=>t instanceof Date)(t)?e.append(n,t.toISOString()):!(t=>t===Object(t))(t)||(t=>p(t)&&"string"==typeof t.name&&("object"==typeof t.lastModifiedDate||"number"==typeof t.lastModified))(t)||p(t)?e.append(n,t):Object.keys(t).forEach((i=>{const o=t[i];if(v(o))for(;i.length>2&&i.lastIndexOf("[]")===i.length-2;)i=i.substring(0,i.length-2);m(o,s,e,n?n+"["+i+"]":i)}))),e);var _={serialize:m};function f(t){if(null===t||"object"!=typeof t)return t;const s=Array.isArray(t)?[]:{};return Object.keys(t).forEach((e=>{s[e]=f(t[e])})),s}function h(t){return Array.isArray(t)?t:[t]}function b(t){return t instanceof File||t instanceof Blob||t instanceof FileList||"object"==typeof t&&null!==t&&void 0!==Object.values(t).find((t=>b(t)))}class g{constructor(){this.errors={},this.errors={}}set(t,s){"object"==typeof t?this.errors=t:this.set(d(d({},this.errors),{[t]:h(s)}))}all(){return this.errors}has(t){return Object.prototype.hasOwnProperty.call(this.errors,t)}hasAny(...t){return t.some((t=>this.has(t)))}any(){return Object.keys(this.errors).length>0}get(t){if(this.has(t))return this.getAll(t)[0]}getAll(t){return h(this.errors[t]||[])}only(...t){const s=[];return t.forEach((t=>{const e=this.get(t);e&&s.push(e)})),s}flatten(){return Object.values(this.errors).reduce(((t,s)=>t.concat(s)),[])}clear(t){const s={};t&&Object.keys(this.errors).forEach((e=>{e!==t&&(s[e]=this.errors[e])})),this.set(s)}}class y{constructor(t={}){this.originalData={},this.busy=!1,this.successful=!1,this.recentlySuccessful=!1,this.recentlySuccessfulTimeoutId=void 0,this.errors=new g,this.progress=void 0,this.update(t)}static make(t){return new this(t)}update(t){this.originalData=Object.assign({},this.originalData,f(t)),Object.assign(this,t)}fill(t={}){this.keys().forEach((s=>{this[s]=t[s]}))}data(){return this.keys().reduce(((t,s)=>d(d({},t),{[s]:this[s]})),{})}keys(){return Object.keys(this).filter((t=>!y.ignore.includes(t)))}startProcessing(){this.errors.clear(),this.busy=!0,this.successful=!1,this.progress=void 0,this.recentlySuccessful=!1,clearTimeout(this.recentlySuccessfulTimeoutId)}finishProcessing(){this.busy=!1,this.successful=!0,this.progress=void 0,this.recentlySuccessful=!0,this.recentlySuccessfulTimeoutId=setTimeout((()=>{this.recentlySuccessful=!1}),y.recentlySuccessfulTimeout)}clear(){this.errors.clear(),this.successful=!1,this.recentlySuccessful=!1,this.progress=void 0,clearTimeout(this.recentlySuccessfulTimeoutId)}reset(){Object.keys(this).filter((t=>!y.ignore.includes(t))).forEach((t=>{this[t]=f(this.originalData[t])}))}get(t,s={}){return this.submit("get",t,s)}post(t,s={}){return this.submit("post",t,s)}patch(t,s={}){return this.submit("patch",t,s)}put(t,s={}){return this.submit("put",t,s)}delete(t,s={}){return this.submit("delete",t,s)}submit(t,s,e={}){return this.startProcessing(),e=d({data:{},params:{},url:this.route(s),method:t,onUploadProgress:this.handleUploadProgress.bind(this)},e),"get"===t.toLowerCase()?e.params=d(d({},this.data()),e.params):(e.data=d(d({},this.data()),e.data),b(e.data)&&!e.transformRequest&&(e.transformRequest=[t=>_.serialize(t)])),new Promise(((t,s)=>{(y.axios||i()).request(e).then((s=>{this.finishProcessing(),t(s)})).catch((t=>{this.handleErrors(t),s(t)}))}))}handleErrors(t){this.busy=!1,this.progress=void 0,t.response&&this.errors.set(this.extractErrors(t.response))}extractErrors(t){return t.data&&"object"==typeof t.data?t.data.errors?d({},t.data.errors):t.data.message?{error:t.data.message}:d({},t.data):{error:y.errorMessage}}handleUploadProgress(t){this.progress={total:t.total,loaded:t.loaded,percentage:Math.round(100*t.loaded/t.total)}}route(t,s={}){let e=t;return Object.prototype.hasOwnProperty.call(y.routes,t)&&(e=decodeURI(y.routes[t])),"object"!=typeof s&&(s={id:s}),Object.keys(s).forEach((t=>{e=e.replace(`{${t}}`,s[t])})),e}onKeydown(t){const s=t.target;s.name&&this.errors.clear(s.name)}}y.routes={},y.errorMessage="Something went wrong. Please try again.",y.recentlySuccessfulTimeout=2e3,y.ignore=["busy","successful","errors","progress","originalData","recentlySuccessful","recentlySuccessfulTimeoutId"];const w=y},2354:(t,s,e)=>{e.r(s),e.d(s,{default:()=>d});var n=e(1241),i=e(629),o=e(2661),r=e(5714);function a(t,s){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter((function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),e.push.apply(e,n)}return e}function l(t,s,e){return s in t?Object.defineProperty(t,s,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[s]=e,t}const c={layout:"backend",middleware:["auth"],components:{NLDatatable:n.Z},data:function(){return{rowSelected:null,config:{data:null,namespace:"missions",state_key:"processes",rowKey:"id",columns:[{label:"Famille",field:"familly"},{label:"Domaine",field:"domain"},{label:"Processus",field:"name"},{label:"Total points de contrôle",field:"control_points_count"},{label:"Moyenne",field:"avg_score",methods:{style:function(t){var s=t.avg_score;return 1==s?"bg-success text-white text-bold":2==s?"bg-info text-white text-bold":3==s?"bg-warning text-bold":4==s?"bg-danger text-white text-bold":void 0}}},{label:"Progression",field:"progress_status",methods:{showField:function(t){return t.progress_status+"%"}}}],actions:{show:!0}},modals:{opinion:!1,report:!1},forms:{opinion:new r.l0({opinion:null,id:null,type:"Avis contrôleur",validated:!1,edit_mode:!0}),report:new r.l0({report:null,id:null,type:"Rapport",validated:!1,edit_mode:!0}),validations:{opinion:new r.l0({type:"Avis contrôleur"}),report:new r.l0({type:"Rapport"})}}}},breadcrumb:function(){var t,s;return{label:"Mission "+(null===(t=this.mission)||void 0===t||null===(s=t.current)||void 0===s?void 0:s.reference)}},computed:function(t){for(var s=1;s<arguments.length;s++){var e=null!=arguments[s]?arguments[s]:{};s%2?a(Object(e),!0).forEach((function(s){l(t,s,e[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):a(Object(e)).forEach((function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(e,s))}))}return t}({},(0,i.Se)({mission:"missions/current",processes:"missions/processes"})),created:function(){this.initData()},methods:{showReport:function(){this.modals.report=!0},saveReport:function(){var t=this;this.forms.report.post("/api/missions/reports/"+this.mission.current.id).then((function(s){s.data.status?(swal.toast_success(s.data.message),t.forms.opinion.reset(),t.initData()):swal.alert_error(s.data.message)})).catch((function(t){console.log(t)}))},validateReport:function(){var t=this;swal.confirm_update().then((function(s){s.isConfirmed&&t.forms.validations.report.put("/api/missions/reports/"+t.mission.current.id).then((function(s){s.data.status?(swal.toast_success(s.data.message),t.initData()):swal.alert_error(s.data.message)})).catch((function(t){console.log(t)}))}))},showOpinion:function(){this.modals.opinion=!0},saveOpinion:function(){var t=this;this.forms.opinion.post("/api/missions/reports/"+this.mission.current.id).then((function(s){s.data.status?(swal.toast_success(s.data.message),t.forms.opinion.reset(),t.initData()):swal.alert_error(s.data.message)})).catch((function(t){console.log(t)}))},validateOpinion:function(){var t=this;swal.confirm_update().then((function(s){s.isConfirmed&&t.forms.validations.opinion.put("/api/missions/reports/"+t.mission.current.id).then((function(s){s.data.status?(swal.toast_success(s.data.message),t.initData()):swal.alert_error(s.data.message)})).catch((function(t){console.log(t)}))}))},enableEdition:function(t){"opinion"==t?(this.forms.opinion.edit_mode=!0,this.forms.opinion.opinion=this.mission.current.controller_opinion.content,this.forms.opinion.id=this.mission.current.controller_opinion.id):"report"==t&&(this.forms.report.edit_mode=!0,this.forms.report.report=this.mission.current.head_of_department_report.content,this.forms.report.id=this.mission.current.head_of_department_report.id)},initData:function(){var t=this;this.close(),this.$store.dispatch("missions/fetch",{missionId:this.$route.params.missionId}),this.$store.dispatch("missions/fetch",{missionId:this.$route.params.missionId,onlyProcesses:!0}).then((function(){return t.config.data=t.processes.processes})),this.forms.opinion.edit_mode=!1,this.forms.report.edit_mode=!1},details:function(t){var s,e;t=null!==(s=t)&&void 0!==s&&null!==(e=s.item)&&void 0!==e&&e.id?t.item:t,this.$router.push({name:"missions-details",params:{missionId:this.mission.current.id,processId:t.id}})},destroy:function(){var t=this;swal.confirm_destroy().then((function(s){var e;s.isConfirmed&&o.Z.delete("missions/"+(null===(e=t.mission)||void 0===e?void 0:e.current.id)).then((function(s){s.data.status?(t.initData(),swal.toast_success(s.data.message)):swal.alert_error(s.data.message)})).catch((function(t){console.log(t)}))}))},show:function(t){this.rowSelected=t},close:function(){this.rowSelected=null}}};const d=(0,e(1900).Z)(c,(function(){var t,s,e,n,i,o,r,a,l,c,d,u,v,p,m,_,f,h,b,g,y,w,C,k,x,O,j,S,P,D,A,E,N,I,R,L,M,T,V,$,U,F,q,B,K,Z,z,H,W,G,J,Q,X,Y,tt,st,et,nt=this,it=nt._self._c;return it("ContentBody",{directives:[{name:"can",rawName:"v-can",value:"view_mission",expression:"'view_mission'"}]},[it("div",{staticClass:"d-flex justify-end align-center gap-3 my-2"},[it("router-link",{directives:[{name:"can",rawName:"v-can",value:"view_mission",expression:"'view_mission'"}],staticClass:"btn",attrs:{to:{name:"campaign",params:{campaignId:null===(t=nt.mission)||void 0===t?void 0:t.current.campaign.id}}}},[nt._v("\n      Campagne de contrôle\n    ")]),nt._v(" "),(null===(s=nt.mission)||void 0===s||null===(e=s.current)||void 0===e?void 0:e.remaining_days_before_start)>5?it("router-link",{directives:[{name:"can",rawName:"v-can",value:"edit_mission",expression:"'edit_mission'"}],staticClass:"btn btn-warning",attrs:{to:{name:"missions-edit",params:{missionId:null===(n=nt.mission)||void 0===n?void 0:n.current.id}}}},[it("i",{staticClass:"las la-edit icon"})]):nt._e()],1),nt._v(" "),it("div",{staticClass:"box border-primary-dark border-1 mb-10"},[it("div",{staticClass:"grid gap-6"},[it("div",{staticClass:"col-4"},[it("div",{staticClass:"grid gap-6"},[it("div",{staticClass:"col-12"},[it("span",{staticClass:"text-bold"},[nt._v("\n              Mission:\n            ")]),nt._v(" "),it("span",[nt._v("\n              "+nt._s(null===(i=nt.mission)||void 0===i||null===(o=i.current)||void 0===o?void 0:o.reference)+"\n            ")])]),nt._v(" "),it("div",{staticClass:"col-12"},[it("span",{staticClass:"text-bold"},[nt._v("\n              DRE:\n            ")]),nt._v(" "),it("span",[nt._v("\n              "+nt._s(null===(r=nt.mission)||void 0===r||null===(a=r.current)||void 0===a?void 0:a.dre.full_name)+"\n            ")])]),nt._v(" "),it("div",{staticClass:"col-12"},[it("span",{staticClass:"text-bold"},[nt._v("\n              Agence:\n            ")]),nt._v(" "),it("span",[nt._v("\n              "+nt._s(null===(l=nt.mission)||void 0===l||null===(c=l.current)||void 0===c?void 0:c.agency.full_name)+"\n            ")])])])]),nt._v(" "),it("div",{staticClass:"col-4"},[it("div",{staticClass:"grid gap-6"},[it("div",{staticClass:"col-12"},[it("span",{staticClass:"text-bold"},[nt._v("\n              Campagne:\n            ")]),nt._v(" "),it("span",[nt._v("\n              "+nt._s(null===(d=nt.mission)||void 0===d||null===(u=d.current)||void 0===u?void 0:u.campaign.reference)+"\n            ")])]),nt._v(" "),it("div",{staticClass:"col-12"},[it("span",{staticClass:"text-bold"},[nt._v("\n              Début:\n            ")]),nt._v(" "),it("span",[nt._v("\n              "+nt._s((null===(v=nt.mission)||void 0===v||null===(p=v.current)||void 0===p?void 0:p.start)+" / "+(null===(m=nt.mission)||void 0===m||null===(_=m.current)||void 0===_?void 0:_.remaining_days_before_start_str))+"\n            ")])]),nt._v(" "),it("div",{staticClass:"col-12"},[it("span",{staticClass:"text-bold"},[nt._v("\n              Fin:\n            ")]),nt._v(" "),it("span",[nt._v("\n              "+nt._s((null===(f=nt.mission)||void 0===f||null===(h=f.current)||void 0===h?void 0:h.end)+" / "+(null===(b=nt.mission)||void 0===b||null===(g=b.current)||void 0===g?void 0:g.remaining_days_before_end_str))+"\n            ")])])])]),nt._v(" "),it("div",{staticClass:"col-4"},[it("div",{staticClass:"grid gap-6"},[it("div",{staticClass:"col-12"},[it("span",{staticClass:"text-bold"},[nt._v("\n              Contrôleurs:\n            ")]),nt._v(" "),it("span",[it("ul",{staticClass:"d-inline-block ml-6"},nt._l(null===(y=nt.mission)||void 0===y||null===(w=y.current)||void 0===w?void 0:w.controllers,(function(t){return it("li",{key:"controller-"+t.id},[nt._v("\n                  "+nt._s(t.full_name)+"\n                ")])})),0)])]),nt._v(" "),it("div",{staticClass:"col-12"},[it("span",{staticClass:"text-bold"},[nt._v("\n              Progression:\n            ")]),nt._v(" "),it("span",[nt._v("\n              "+nt._s(null===(C=nt.mission)||void 0===C||null===(k=C.current)||void 0===k?void 0:k.progress_status)+"%\n            ")])]),nt._v(" "),it("div",{staticClass:"col-12"},[it("span",{staticClass:"text-bold"},[nt._v("\n              Statut:\n            ")]),nt._v(" "),it("span",[nt._v("\n              "+nt._s(null===(x=nt.mission)||void 0===x||null===(O=x.current)||void 0===O?void 0:O.realisation_state)+"\n            ")])])])]),nt._v(" "),it("div",{staticClass:"col-12"},[it("span",{staticClass:"text-bold"},[nt._v("\n          Moyenne:\n        ")]),nt._v(" "),it("span",[nt._v("\n          "+nt._s(null===(j=nt.mission)||void 0===j||null===(S=j.current)||void 0===S?void 0:S.avg_score)+"\n        ")])]),nt._v(" "),it("div",{staticClass:"col-12"},[it("span",{staticClass:"text-bold"},[nt._v("\n          Note:\n        ")]),nt._v(" "),it("span",[nt._v("\n          "+nt._s((null===(P=nt.mission)||void 0===P||null===(D=P.current)||void 0===D?void 0:D.note)||"-")+"\n        ")])])])]),nt._v(" "),it("div",{staticClass:"d-flex justify-between align-items"},[it("h2",[nt._v("Processus de la mission")]),nt._v(" "),it("div",[it("div",{directives:[{name:"can",rawName:"v-can",value:"create_opinion",expression:"'create_opinion'"}]},[null!==(A=nt.mission)&&void 0!==A&&A.current.controller_opinion||100===(null===(E=nt.mission)||void 0===E?void 0:E.current.progress_status)?nt._e():it("button",{staticClass:"btn btn-info",on:{click:nt.showOpinion}},[nt._v("\n          Ajouter votre avis\n        ")]),nt._v(" "),100!==(null===(N=nt.mission)||void 0===N?void 0:N.current.progress_status)&&null!==(I=nt.mission)&&void 0!==I&&I.current.head_of_department_report&&null!==(R=nt.mission)&&void 0!==R&&null!==(L=R.current.head_of_department_report)&&void 0!==L&&L.is_validated?it("button",{staticClass:"btn btn-info",on:{click:nt.showReport}},[nt._v("\n          Rapport de la mission\n        ")]):nt._e(),nt._v(" "),null!==(M=nt.mission)&&void 0!==M&&M.current.controller_opinion&&100!==(null===(T=nt.mission)||void 0===T?void 0:T.current.progress_status)?it("button",{staticClass:"btn btn-info",on:{click:nt.showOpinion}},[nt._v("\n          Votre avis\n        ")]):nt._e(),nt._v(" "),100===(null===(V=nt.mission)||void 0===V?void 0:V.current.progress_status)||null!==($=nt.mission)&&void 0!==$&&null!==(U=$.current.controller_opinion)&&void 0!==U&&U.is_validated||null===(F=nt.mission)||void 0===F||!F.current.controller_opinion?nt._e():it("button",{staticClass:"btn btn-success",on:{click:function(t){return t.preventDefault(),nt.validateOpinion.apply(null,arguments)}}},[nt._v("\n          Valider la mission\n        ")])]),nt._v(" "),it("div",{directives:[{name:"can",rawName:"v-can",value:"create_report",expression:"'create_report'"}]},[100===(null===(q=nt.mission)||void 0===q?void 0:q.current.progress_status)||null!==(B=nt.mission)&&void 0!==B&&B.current.head_of_department_report?nt._e():it("button",{staticClass:"btn btn-info",on:{click:nt.showReport}},[nt._v("\n          Ajouter votre rapport\n        ")]),nt._v(" "),100!==(null===(K=nt.mission)||void 0===K?void 0:K.current.progress_status)&&null!==(Z=nt.mission)&&void 0!==Z&&Z.current.head_of_department_report&&null!==(z=nt.mission)&&void 0!==z&&null!==(H=z.current.controller_opinion)&&void 0!==H&&H.is_validated?it("button",{staticClass:"btn btn-info",on:{click:nt.showReport}},[nt._v("\n          Votre rapport\n        ")]):nt._e(),nt._v(" "),100!==(null===(W=nt.mission)||void 0===W?void 0:W.current.progress_status)&&null!==(G=nt.mission)&&void 0!==G&&null!==(J=G.current.controller_opinion)&&void 0!==J&&J.is_validated?it("button",{staticClass:"btn btn-info",on:{click:nt.showOpinion}},[nt._v("\n          Avis du contrôleur\n        ")]):nt._e(),nt._v(" "),100===(null===(Q=nt.mission)||void 0===Q?void 0:Q.current.progress_status)||null===(X=nt.mission)||void 0===X||null===(Y=X.current.controller_opinion)||void 0===Y||!Y.is_validated||null!==(tt=nt.mission)&&void 0!==tt&&null!==(st=tt.current.head_of_department_report)&&void 0!==st&&st.is_validated||null===(et=nt.mission)||void 0===et||!et.current.head_of_department_report?nt._e():it("button",{directives:[{name:"can",rawName:"v-can",value:"create_report",expression:"'create_report'"}],staticClass:"btn btn-success",on:{click:function(t){return t.preventDefault(),nt.validateReport.apply(null,arguments)}}},[nt._v("\n          Valider la mission\n        ")])])])]),nt._v(" "),it("NLDatatable",{attrs:{config:nt.config},on:{show:nt.show},scopedSlots:nt._u([{key:"actions",fn:function(t){return[it("button",{staticClass:"btn btn-info has-icon",on:{click:function(s){return s.stopPropagation(),nt.details(t)}}},[it("i",{staticClass:"las la-tasks icon"})])]}}])}),nt._v(" "),it("NLModal",{attrs:{show:nt.rowSelected},on:{close:nt.close},scopedSlots:nt._u([{key:"title",fn:function(){var t,s,e;return[it("small",{staticClass:"tag is-info text-small"},[nt._v("\n        "+nt._s(null===(t=nt.rowSelected)||void 0===t?void 0:t.familly)+"\n      ")]),nt._v(" "),it("small",{staticClass:"tag is-primary-dark text-small mx-1"},[nt._v("\n        "+nt._s(null===(s=nt.rowSelected)||void 0===s?void 0:s.domain)+"\n      ")]),nt._v(" "),it("small",{staticClass:"tag is-warning text-small"},[nt._v("\n        "+nt._s(null===(e=nt.rowSelected)||void 0===e?void 0:e.name)+"\n      ")])]},proxy:!0},{key:"default",fn:function(){var t;return[it("p",{staticClass:"text-bold mb-6"},[nt._v("\n        Points de contrôle\n      ")]),nt._v(" "),it("div",{staticClass:"grid list"},nt._l(null===(t=nt.rowSelected)||void 0===t?void 0:t.controlPoints,(function(t){return it("div",{key:t.id,staticClass:"col-12 list-item"},[it("div",{staticClass:"list-item-content"},[nt._v("\n            "+nt._s(t.name)+"\n          ")])])})),0)]},proxy:!0},{key:"footer",fn:function(){var t;return[it("button",{staticClass:"btn btn-info has-icon",on:{click:function(t){return t.stopPropagation(),nt.details(nt.rowSelected)}}},[it("i",{staticClass:"las la-tasks icon"}),nt._v(" "),100==(null===(t=nt.rowSelected)||void 0===t?void 0:t.progress_status)?it("span",[nt._v("\n          Afficher\n        ")]):it("span",[nt._v("\n          Éffectuer\n        ")])])]},proxy:!0}])}),nt._v(" "),it("NLModal",{attrs:{show:nt.modals.opinion},on:{close:function(t){nt.modals.opinion=!1}},scopedSlots:nt._u([{key:"title",fn:function(){return[it("h2",[nt._v("Avis du contrôleur")])]},proxy:!0},{key:"default",fn:function(){var t,s,e,n,i;return[null===(t=nt.mission)||void 0===t||!t.current.controller_opinion||nt.forms.opinion.edit_mode?it("form",{on:{submit:function(t){return t.preventDefault(),nt.saveOpinion.apply(null,arguments)},keydown:function(t){return nt.forms.opinion.onKeydown(t)}}},[it("div",{staticClass:"grid"},[it("div",{staticClass:"col-12"},[it("NLWyswyg",{attrs:{name:"opinion",form:nt.forms.opinion,label:"Avis du contrôleur",labelRequired:""},model:{value:nt.forms.opinion.opinion,callback:function(t){nt.$set(nt.forms.opinion,"opinion",t)},expression:"forms.opinion.opinion"}})],1),nt._v(" "),it("div",{staticClass:"col-12"},[it("NLCheckbox",{attrs:{name:"validated",form:nt.forms.opinion,label:"Validé la mission"},model:{value:nt.forms.opinion.validated,callback:function(t){nt.$set(nt.forms.opinion,"validated",t)},expression:"forms.opinion.validated"}})],1)]),nt._v(" "),it("div",{staticClass:"d-flex justify-end align-center"},[it("NLButton",{attrs:{loading:nt.forms.opinion.busy,label:"Save"}})],1)]):it("div",{staticClass:"grid"},[it("div",{staticClass:"col-12",domProps:{innerHTML:nt._s(null===(s=nt.mission)||void 0===s?void 0:s.current.controller_opinion.content)}}),nt._v(" "),null!==(e=nt.mission)&&void 0!==e&&null!==(n=e.current.controller_opinion)&&void 0!==n&&n.is_validated?it("div",{staticClass:"col-12"},[it("b",[nt._v("Validé le:")]),nt._v(" "),it("time",[nt._v(nt._s(null===(i=nt.mission)||void 0===i?void 0:i.current.controller_opinion.validated_at))])]):nt._e()])]},proxy:!0},{key:"footer",fn:function(){var t,s,e,n,i,o;return[null!==(t=nt.mission)&&void 0!==t&&null!==(s=t.current.controller_opinion)&&void 0!==s&&s.is_validated||null===(e=nt.mission)||void 0===e||!e.current.controller_opinion||nt.forms.opinion.edit_mode?nt._e():it("button",{directives:[{name:"can",rawName:"v-can",value:"create_opinion",expression:"'create_opinion'"}],staticClass:"btn btn-success has-icon",on:{click:function(t){return t.preventDefault(),nt.validateOpinion.apply(null,arguments)}}},[it("i",{staticClass:"las la-check-circle icon"}),nt._v("\n        Valider la mission\n      ")]),nt._v(" "),null!==(n=nt.mission)&&void 0!==n&&null!==(i=n.current.controller_opinion)&&void 0!==i&&i.is_validated||null===(o=nt.mission)||void 0===o||!o.current.controller_opinion||nt.forms.opinion.edit_mode?nt._e():it("button",{directives:[{name:"can",rawName:"v-can",value:"create_opinion",expression:"'create_opinion'"}],staticClass:"btn btn-warning has-icon",on:{click:function(t){return t.preventDefault(),nt.enableEdition("opinion")}}},[it("i",{staticClass:"las la-edit icon"}),nt._v("\n        Editer l'avis\n      ")])]},proxy:!0}])}),nt._v(" "),it("NLModal",{attrs:{show:nt.modals.report},on:{close:function(t){nt.modals.report=!1}},scopedSlots:nt._u([{key:"title",fn:function(){return[it("h2",[nt._v("Rapport du chef de département")])]},proxy:!0},{key:"default",fn:function(){var t,s,e,n,i;return[null===(t=nt.mission)||void 0===t||!t.current.head_of_department_report||nt.forms.report.edit_mode?it("form",{on:{submit:function(t){return t.preventDefault(),nt.saveReport.apply(null,arguments)},keydown:function(t){return nt.forms.report.onKeydown(t)}}},[it("div",{staticClass:"grid"},[it("div",{staticClass:"col-12"},[it("NLWyswyg",{attrs:{name:"report",form:nt.forms.report,label:"Rapport du chef de département",labelRequired:""},model:{value:nt.forms.report.report,callback:function(t){nt.$set(nt.forms.report,"report",t)},expression:"forms.report.report"}})],1),nt._v(" "),it("div",{staticClass:"col-12"},[it("NLCheckbox",{attrs:{name:"validated",form:nt.forms.report,label:"Validé la mission"},model:{value:nt.forms.report.validated,callback:function(t){nt.$set(nt.forms.report,"validated",t)},expression:"forms.report.validated"}})],1)]),nt._v(" "),it("div",{staticClass:"d-flex justify-end align-center"},[it("NLButton",{attrs:{loading:nt.forms.report.busy,label:"Save"}})],1)]):it("div",{staticClass:"grid"},[it("div",{staticClass:"col-12",domProps:{innerHTML:nt._s(null===(s=nt.mission)||void 0===s?void 0:s.current.head_of_department_report.content)}}),nt._v(" "),null!==(e=nt.mission)&&void 0!==e&&null!==(n=e.current.head_of_department_report)&&void 0!==n&&n.is_validated?it("div",{staticClass:"col-12"},[it("b",[nt._v("Validé le:")]),nt._v(" "),it("time",[nt._v(nt._s(null===(i=nt.mission)||void 0===i?void 0:i.current.head_of_department_report.validated_at))])]):nt._e()])]},proxy:!0},{key:"footer",fn:function(){var t,s,e,n,i,o;return[null!==(t=nt.mission)&&void 0!==t&&null!==(s=t.current.head_of_department_report)&&void 0!==s&&s.is_validated||null===(e=nt.mission)||void 0===e||!e.current.head_of_department_report||nt.forms.report.edit_mode?nt._e():it("button",{directives:[{name:"can",rawName:"v-can",value:"create_report",expression:"'create_report'"}],staticClass:"btn btn-success has-icon",on:{click:function(t){return t.preventDefault(),nt.validateReport.apply(null,arguments)}}},[it("i",{staticClass:"las la-check-circle icon"}),nt._v("\n        Valider la mission\n      ")]),nt._v(" "),null!==(n=nt.mission)&&void 0!==n&&null!==(i=n.current.head_of_department_report)&&void 0!==i&&i.is_validated||null===(o=nt.mission)||void 0===o||!o.current.head_of_department_report||nt.forms.report.edit_mode?nt._e():it("button",{directives:[{name:"can",rawName:"v-can",value:"create_report",expression:"'create_report'"}],staticClass:"btn btn-warning has-icon",on:{click:function(t){return t.preventDefault(),nt.enableEdition("report")}}},[it("i",{staticClass:"las la-edit icon"}),nt._v("\n        Editer le rapport\n      ")])]},proxy:!0}])})],1)}),[],!1,null,null,null).exports}}]);